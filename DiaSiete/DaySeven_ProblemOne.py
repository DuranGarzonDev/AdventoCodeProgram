import collections

def solve_tachyon_manifold(grid_input):
    # Parse the input into a grid (list of strings)
    grid = [line for line in grid_input.strip().split('\n')]
    rows = len(grid)
    cols = len(grid[0])
    
    start_pos = None
    
    # Locate 'S'
    for r in range(rows):
        for c in range(cols):
            if grid[r][c] == 'S':
                start_pos = (r, c)
                break
        if start_pos:
            break
            
    if not start_pos:
        return 0

    # Queue for BFS: stores tuples of (row, col)
    queue = collections.deque([start_pos])
    
    # Track where beams have existed to handle merging and prevent cycles
    # (row, col)
    visited_beams = set()
    
    # Track specific splitters that have been activated
    hit_splitters = set()

    while queue:
        r, c = queue.popleft()

        # Bounds check
        if r < 0 or r >= rows or c < 0 or c >= cols:
            continue

        # If we have already simulated a beam at this exact coordinate,
        # we don't need to do it again (beams merge).
        if (r, c) in visited_beams:
            continue
        
        visited_beams.add((r, c))

        cell_char = grid[r][c]

        if cell_char == '^':
            # Splitter logic:
            # 1. Count this splitter
            hit_splitters.add((r, c))
            # 2. Spawn beam to the left (same row)
            queue.append((r, c - 1))
            # 3. Spawn beam to the right (same row)
            queue.append((r, c + 1))
            # Note: Beam does NOT continue downward from a splitter
            
        else:
            # Empty space ('.') or Start ('S') logic:
            # Beam continues downward
            queue.append((r + 1, c))

    return len(hit_splitters)

# Example Usage
example_input = """
......................................................................S......................................................................
.............................................................................................................................................
......................................................................^......................................................................
.............................................................................................................................................
.....................................................................^.^.....................................................................
.............................................................................................................................................
....................................................................^.^.^....................................................................
.............................................................................................................................................
...................................................................^...^.^...................................................................
.............................................................................................................................................
..................................................................^.^.^...^..................................................................
.............................................................................................................................................
.................................................................^...^.^.^.^.................................................................
.............................................................................................................................................
................................................................^.^.^.^.^.^.^................................................................
.............................................................................................................................................
...............................................................^.^.^...^.^...^...............................................................
.............................................................................................................................................
..............................................................^.^.^...^.^.^...^..............................................................
.............................................................................................................................................
.............................................................^.^.^.....^.^.^.^.^.............................................................
.............................................................................................................................................
............................................................^.^.^.^...^.^.....^.^............................................................
.............................................................................................................................................
...........................................................^.^.......^...^.^.^.^.^...........................................................
.............................................................................................................................................
..........................................................^.^...^.^.^...^.^.^.^.^.^..........................................................
.............................................................................................................................................
.........................................................^.^.^...^.^.^.^.^.^.^.^.^.^.........................................................
.............................................................................................................................................
........................................................^.^.^.^.........^.^...^...^.^........................................................
.............................................................................................................................................
.......................................................^.^.^...^.^.....^.^.^.......^.^.......................................................
.............................................................................................................................................
......................................................^.^.....^.^.^.....^.^.^.....^.^.^......................................................
.............................................................................................................................................
.....................................................^...^.^.^.^.^.^.....^.^.^.^.^.^.^.^.....................................................
.............................................................................................................................................
....................................................^.^...^...^.^.^.^.^.^.^.....^.^.....^....................................................
.............................................................................................................................................
...................................................^.^...^.^.^.^...^...^.....^.^...^.....^...................................................
.............................................................................................................................................
..................................................^.......^.^...^.^.^.^.^.^.....^.^...^...^..................................................
.............................................................................................................................................
.................................................^...^.....^...^...^...^.^.^.^...^.^.^.^...^.................................................
.............................................................................................................................................
................................................^.^.^.^.^...^.....^...^.^.^.^.^.^.^...^.^.^.^................................................
.............................................................................................................................................
...............................................^.^.^.^.......^...^...^.^.^...^.^.^.^.^...^.^.^...............................................
.............................................................................................................................................
..............................................^.^.^...^.^.^.^.^...^.^.....^.^.^.^.^.....^.^.^.^..............................................
.............................................................................................................................................
.............................................^.^.^.^.^.^.^...^.^.....^.^.^.^.^...^.....^...^.^.^.............................................
.............................................................................................................................................
............................................^.^.^.^.^.^.^...^.^.^...^.............^.....^.....^.^............................................
.............................................................................................................................................
...........................................^.^.^.....^...^.^.^.^...^.^...^.....^...^.....^.^.^.^.^...........................................
.............................................................................................................................................
..........................................^.^.^.^.^.^.^.^.^...^.^...^.^.......^.^.....^.^.^...^.^.^..........................................
.............................................................................................................................................
.........................................^...^.^.^.......^.....^...^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.........................................
.............................................................................................................................................
........................................^.^.^.^.^.^.....^...^.....^.^.....^.^.^.^.^...^...^.^.^.^...^........................................
.............................................................................................................................................
.......................................^.^.^.^.^.^.^.^.^.^.^.^.^.^.......^.......^.^.....^...^.^...^.^.......................................
.............................................................................................................................................
......................................^.^.^.^.^.^.^...^.^...^.^.^...^...^.....^.^.......^.^.....^...^.^......................................
.............................................................................................................................................
.....................................^.^.^.^.^.^.^.^...^...^.^.^.^...^.^.^.^...^.^.^.^.^.^.^.^...^.^...^.....................................
.............................................................................................................................................
....................................^...^.^...^...^.^.....^.^...^.^.^.^.^...^.^.^.^.^...^.^.^.^...^.^.^.^....................................
.............................................................................................................................................
...................................^.^...^...^.^.....^.....^.....^...^.^.^.^.^...^.^.^.^...^...^.^.^.^...^...................................
.............................................................................................................................................
..................................^...^.^.^.^.....^...^.....^.^.^.........^.^.^.....^.^.^.^.^...^.^.^.^.^.^..................................
.............................................................................................................................................
.................................^.....^.^.^.......^.^.....^.^.^.^.......^.^.^...^.....^.......^.^...^.....^.................................
.............................................................................................................................................
................................^...^.^.^.^.^.^.^.^.....^...^.....^.^.^.....^.^...^.^.^.....^.^.......^.^.^.^................................
.............................................................................................................................................
...............................^.^.^.^.^.^.^...^...^.^.^.^.^.^.^.^.^...^.........^.^.^.^.....^.^.^.^...^...^.^...............................
.............................................................................................................................................
..............................^...^.............^...^.^...^...^.^.....^.^.....^...^.^...^.^.^...^...^.^.^.^...^..............................
.............................................................................................................................................
.............................^...^...^...^...^.^.^.^.........^...^.....^.^.^.^.^.^.^.^.....^.......^.^...^...^.^.............................
.............................................................................................................................................
............................^.^.^.^.^.^.....^.^...^.^.............^.^.^.^.^.^...^.^.^...^.^...^...^.^.^...^...^.^............................
.............................................................................................................................................
...........................^...^...^...^.^.^.^.......^.^.^...^...^...^.^.^...^.^.^...^.^.......^.^.^.^.^.^.....^.^...........................
.............................................................................................................................................
..........................^.^.^.^.^.^.^.^...^.^...^.^...^.^.......^.^...^.^.^.^...^.^...^...^.^...^.^.^.^.^.^.^...^..........................
.............................................................................................................................................
.........................^.....^.^.....^.^...^...^.^.^...^.......^.^.^...^.^.....^.....^...^.^...^.....^...^.^.^.^.^.........................
.............................................................................................................................................
........................^.^.^.^.^.^.^.^.^.....^...^...^...^.^.^.^...^.......^.......^...^...^.^.^...^.^.....^...^.^.^........................
.............................................................................................................................................
.......................^.^...^.^.....^.^...^.....^.^.^.^.^.^.^...........^.......^.^.^.......^.^.^.^.^.^.....^.......^.......................
.............................................................................................................................................
......................^.....^...^.^...^.^.^...^.^.^...^.^...^.^.^...^.....^...^.....^.^.^.^.^.^...^.....^.^.^.^...^.^.^......................
.............................................................................................................................................
.....................^.^.^.^...^.^...^...^.^...^.^.^.^.^.^...^.^.^.^...^.^.......^.^...^.........^.^.^.^...^.....^.^.^.^.....................
.............................................................................................................................................
....................^.^.^.^.^.^...^...........^.^.^.^.^.......^.....^.^...^...^.^.^...^.^.^.^...^.^.^.^.^...^.....^.^...^....................
.............................................................................................................................................
...................^.^.....^.^.^.^.^.^.^.^.^.^.^.......^.....^.........^.^.^.^.^.^.^.^.^.....^.^.^...^.^.^...^.^...^.^.^.^...................
.............................................................................................................................................
..................^.......^.^...^.^...^.^.^.....^.^.^.^.....^.......^...^.^.....^.^.....^.^...^.^.^.^.^.....^.^.^.......^.^..................
.............................................................................................................................................
.................^...^.^.^.^.^.....^.^.^...^.^...^...^...^.^.^.^.^.^...^.....^.^.^...^.^.....^.^.^.^.^.^.^.^.^.....^.......^.................
.............................................................................................................................................
................^.^.^.^.^.....^.^.^.^.^.^.^.^.^.^...^.^.^.^.^.^.^...^...^.^.^...^.^.^...^...^.^.....^...^.^.^.^...^.^.....^.^................
.............................................................................................................................................
...............^...^.^.^.^.^.^.^...^.^.....^...^.^.....^.^.....^.^.....^.^.^.^...^.^.^...^.^.....^.^.....^.....^.....^.^.^.^.^...............
.............................................................................................................................................
..............^.^.^...^.........^.^.^.^...^.......^.^.^.^.....^.^.^.^.....^.^.^.....^.^.^.........^.....^.^...^.^...^.^.^.^.^.^..............
.............................................................................................................................................
.............^.^.^.^...^...^.^...^...^.......^.^.^.....^.^.^.^...^...^.^.^.........^.....^.^.....^.......^.^.......^.^.^.^.^.^.^.............
.............................................................................................................................................
............^...^.^.^...............^.^.^.^...^.^.^.^.......^...^.^.^...^.^.^.^...^.^.^.^...^.^.....^.^.^...^.^.....^.^.^.^.^.^.^............
.............................................................................................................................................
...........^.^.^...^.^...^.^.^.^...^.^...^.^.^.....^...^.....^.^.^.^.^...^.^.^.^.....^.^...^.^...^.....^.^.^...^.^.......^...^.^.^...........
.............................................................................................................................................
..........^.^.^.^...^.^.^...^...^.^.^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^.^...^...^.^.......^...^.^.^...^.^.^.^.^.^.^.^.^.^.^...^.^..........
.............................................................................................................................................
.........^.....^.^...^.^.....^.^.^...^.^.^...^.^.....^.^.^...^.^.^.^...^.^.^.^.^.^...^...^.^.^.^.^.^.^.....^.^...^.^.^.^...^.^.^...^.........
.............................................................................................................................................
........^...^.^.^.^.^.^.^.^.....^.^.^...^.^.........^.^.^.^.......^...^...^.^.^.^.^...^...^...^...^.......^...^.^.^.^.^...^.^.^.^.^.^........
.............................................................................................................................................
.......^.....^.^.^...^.^...^...^.....^...^.^.......^.....^.^.^.^.^.^.^.^.......^.^.^.^...^...^.^.^.^.^...^.^.^.^.^.^...^.^.^.^.^.^.^.^.......
.............................................................................................................................................
......^.^.^.^.^.^...^.^.^.^.^.^.^...^...^.^.^.^.....^.^...^...^.^...^.^.^...^.....^.......^.^.^.....^...^.^.^...^...^.^...^.^...^.^...^......
.............................................................................................................................................
.....^...^.......^.^.^.^.^.^.^...^...^...^.^.^...^.^.^.^...^...^.^.^.....^.^.....^...^.....^.....^.^.^...^.^.^...^.^.^...^...^...^.^...^.....
.............................................................................................................................................
....^.^.^...^.^...^.^...^.^...^.^...^.^.^...^.....^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.^.^.^...^.^...^.^.^...^.^.^.^.^...^...^.^.^.....^....
.............................................................................................................................................
...^.^...^.^.^.^...^.^.^.^.^.^.^...........^.^.^.^...^...^.^.^...^.^.....^.^.^.^.....^...^.^.^.^...^...^.^.^.^.^.^.^.^.^.^.^.^...^.......^...
.............................................................................................................................................
..^.^.^.^...^...^.^.^.....^.^.^.^.^...^.^.^.^...^...^.^.^.^...^...^.......^.^.^.^.^.^.^.^.^.^.^...^.^.^...^...^.^...^...^.^.^.^...^.^.^...^..
.............................................................................................................................................
.^.^.^.......^.....^.^.............^...^.....^.^.^.^.^.........^.^.^.........^.^.^.^.^.^.^...^...^.^...^.......^.^...^.^.^.^...^.^.^...^.^.^.
.............................................................................................................................................
"""

# Solve the example
result = solve_tachyon_manifold(example_input)
print(f"Total splitters hit: {result}")